

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Geo Location Based Prediction &mdash; CA_Wildfire 2.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Source and Test files" href="modules.html" />
    <link rel="prev" title="County Based Predictions" href="County_based_prediction.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> CA_Wildfire
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="california_incident_map.html">California Incident Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="County_incident_map.html">County Incident Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="County_based_prediction.html">County Based Predictions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Geo Location Based Prediction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-to-use">How to use</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dashboard-elements-and-the-functions-involved">Dashboard elements and the functions involved</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#california-state-map-and-risk-percentage">1. California state map and Risk percentage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#map-click">1.1 Map Click</a></li>
<li class="toctree-l4"><a class="reference internal" href="#predict-function-geo-location">1.2 Predict function Geo location</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-weather-info">1.3 Get Weather Info</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-0">1.4 Make Sample Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-1">1.3. Risk Percentage</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Source and Test files</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CA_Wildfire</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Geo Location Based Prediction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/Geo_location.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="geo-location-based-prediction">
<span id="geo-location-marker"></span><h1>Geo Location Based Prediction<a class="headerlink" href="#geo-location-based-prediction" title="Permalink to this headline">¶</a></h1>
<p>If you are a user and you want to build a warehouse <a class="reference internal" href="County_based_prediction.html#county-based-prediction-marker"><span class="std std-ref">County based prediction</span></a> is good
place to get some insight into how risky/safe it is to build the warehouse in a particular county. Now, suppose we have a
narrowed list of county’s and want to look at specific locations in the county then this tool is ideal. This model generates a
probability for an incident, based on the user desired lon/lat and time, so you can look at a very specific location and access
the risk.</p>
<div class="section" id="how-to-use">
<h2>How to use<a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h2>
<p>The interaction with user aided with prompts is very self-explanatory and intuitive. User selects a month for query, the on
the map clicks on the specific location coordinates to see the risk percentage for that place.
For example, suppose we choose the <em>Query Month = June</em> and pick a point near <em>Los Angeles</em> we see <strong>Risk Percentage = 63.1%</strong></p>
<a class="reference internal image-reference" href="_images/geo_location_1.PNG"><img alt="_images/geo_location_1.PNG" src="_images/geo_location_1.PNG" style="width: 310.5px; height: 650.7px;" /></a>
</div>
<div class="section" id="dashboard-elements-and-the-functions-involved">
<h2>Dashboard elements and the functions involved<a class="headerlink" href="#dashboard-elements-and-the-functions-involved" title="Permalink to this headline">¶</a></h2>
<p>There is only 1 dashboard element involved -
1. <strong>California state map and Risk percentage</strong></p>
<div class="section" id="california-state-map-and-risk-percentage">
<h3>1. California state map and Risk percentage<a class="headerlink" href="#california-state-map-and-risk-percentage" title="Permalink to this headline">¶</a></h3>
<p>Before, we look at how we predict risk percentage let us look at the interactive california state map through which we get the
input. We can zoom in, zoom out, drag to different locations in California on this dashboard element. Once we click on a
particular location we see a <strong>blue head</strong> to get visual confirmation of the selected location.
<strong>Note</strong> - When we hover over the head, we can actually see the exact location coordinates.</p>
<p>For our example, we choose a location near Los Angeles like this -</p>
<a class="reference internal image-reference" href="_images/geo_location_2.PNG"><img alt="_images/geo_location_2.PNG" src="_images/geo_location_2.PNG" style="width: 909.0px; height: 750.6px;" /></a>
<div class="section" id="map-click">
<h4>1.1 Map Click<a class="headerlink" href="#map-click" title="Permalink to this headline">¶</a></h4>
<p>This acts as an input to capture the coordinates which is then fed to the backend function <strong>pred_func_geo()</strong> to get predicted
risk percentage.</p>
<span class="target" id="module-src.app"></span><dl class="py function">
<dt class="sig sig-object py" id="src.app.map_click">
<span class="sig-prename descclassname"><span class="pre">src.app.</span></span><span class="sig-name descname"><span class="pre">map_click</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coordinates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/app.html#map_click"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.app.map_click" title="Permalink to this definition">¶</a></dt>
<dd><p>Interacts with <strong>pred_func_geo</strong> in utils.py and passes the information that the function needs.</p>
<dl class="simple">
<dt>Input :</dt><dd><p>coordinates - Coordinates for location clicked on the map
month</p>
</dd>
<dt>Return :</dt><dd><p>Marker on the map</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="predict-function-geo-location">
<h4>1.2 Predict function Geo location<a class="headerlink" href="#predict-function-geo-location" title="Permalink to this headline">¶</a></h4>
<p>This function essentially uses <strong>geo_model()</strong> to make the actual prediction. We talk more about this later. This function also depends
on several other modules to get the actual data like - <strong>get_weatherInfo()</strong> and <strong>make_sample_features()</strong></p>
<span class="target" id="module-src.utils"></span><dl class="py function">
<dt class="sig sig-object py" id="src.utils.pred_func_geo">
<span class="sig-prename descclassname"><span class="pre">src.utils.</span></span><span class="sig-name descname"><span class="pre">pred_func_geo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">all_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">county_coordinates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encodings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extreames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/utils.html#pred_func_geo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.utils.pred_func_geo" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a wrapper function that uses functions like <strong>get_weatherInfo</strong> and <strong>make_sample_features</strong>. Requires inputs
like latitude, longitude, month.</p>
<dl class="simple">
<dt>Input :</dt><dd><dl class="field-list simple">
<dt class="field-odd">param lon</dt>
<dd class="field-odd"><p>the longitude of the location of interest within California</p>
</dd>
<dt class="field-even">type lon</dt>
<dd class="field-even"><p>float/int</p>
</dd>
<dt class="field-odd">param lat</dt>
<dd class="field-odd"><p>the latitude of the location of interest within California</p>
</dd>
<dt class="field-even">type lat</dt>
<dd class="field-even"><p>float/int</p>
</dd>
<dt class="field-odd">param month</dt>
<dd class="field-odd"><p>the month of the year for which use want to check the danger of fire incident within California</p>
</dd>
<dt class="field-even">type month</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd>
<dt>Return :</dt><dd><p>Probability of safety from wildfire incidents.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="get-weather-info">
<h4>1.3 Get Weather Info<a class="headerlink" href="#get-weather-info" title="Permalink to this headline">¶</a></h4>
<p>This function uses all the processed weather data like <em>temperature</em> , <em>wind-speed</em>, <em>precipitation</em>
.. automodule:: src.utils</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">members</dt>
<dd class="field-odd"><p>get_weatherInfo</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="module-0">
<span id="make-sample-features"></span><h4>1.4 Make Sample Features<a class="headerlink" href="#module-0" title="Permalink to this headline">¶</a></h4>
<dl class="py function">
<dt class="sig sig-object py" id="src.utils.make_sample_features">
<span class="sig-prename descclassname"><span class="pre">src.utils.</span></span><span class="sig-name descname"><span class="pre">make_sample_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">all_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encodings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extreames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weather_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/utils.html#make_sample_features"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.utils.make_sample_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls function get_hotspots() and returns features like weather,distance,time which is used in prediction.</p>
<dl class="simple">
<dt>Input :</dt><dd><dl class="field-list simple">
<dt class="field-odd">param all_data</dt>
<dd class="field-odd"><p>cleaned and processed data set used for the whole application</p>
</dd>
<dt class="field-even">type all_data</dt>
<dd class="field-even"><p>pandas DF</p>
</dd>
<dt class="field-odd">param encodings</dt>
<dd class="field-odd"><p>the month encodings</p>
</dd>
<dt class="field-even">type encodings</dt>
<dd class="field-even"><p>sklearn encodigs</p>
</dd>
<dt class="field-odd">param extreames</dt>
<dd class="field-odd"><p>the minimum and maximum values needed for data normalization</p>
</dd>
<dt class="field-even">type extreames</dt>
<dd class="field-even"><p>list of float</p>
</dd>
<dt class="field-odd">param weather_data</dt>
<dd class="field-odd"><p>the weather data like temp, humidity, wind speed needed for predication</p>
</dd>
<dt class="field-even">type weather_data</dt>
<dd class="field-even"><p>list of floats</p>
</dd>
<dt class="field-odd">param lon</dt>
<dd class="field-odd"><p>the longitude of the location of interest within California</p>
</dd>
<dt class="field-even">type lon</dt>
<dd class="field-even"><p>float/int</p>
</dd>
<dt class="field-odd">param lat</dt>
<dd class="field-odd"><p>the latitude of the location of interest within California</p>
</dd>
<dt class="field-even">type lat</dt>
<dd class="field-even"><p>float/int</p>
</dd>
<dt class="field-odd">param month</dt>
<dd class="field-odd"><p>the month of the year for which use want to check the danger of fire incident within California</p>
</dd>
<dt class="field-even">type month</dt>
<dd class="field-even"><p>string</p>
</dd>
</dl>
</dd>
<dt>Return :</dt><dd><p>Features required for wildfire predication</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-1">
<span id="risk-percentage"></span><h4>1.3. Risk Percentage<a class="headerlink" href="#module-1" title="Permalink to this headline">¶</a></h4>
<dl class="py function">
<dt class="sig sig-object py" id="src.utils.geo_model">
<span class="sig-prename descclassname"><span class="pre">src.utils.</span></span><span class="sig-name descname"><span class="pre">geo_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_features</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/utils.html#geo_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.utils.geo_model" title="Permalink to this definition">¶</a></dt>
<dd><p>If model and feature are fed, uses <strong>predict_proba()</strong> method of model.</p>
<dl class="simple">
<dt>Input :</dt><dd><dl class="field-list simple">
<dt class="field-odd">param model</dt>
<dd class="field-odd"><p>the model used for the prediction</p>
</dd>
<dt class="field-even">type model</dt>
<dd class="field-even"><p>sklearn model</p>
</dd>
<dt class="field-odd">param model_features</dt>
<dd class="field-odd"><p>the contex rich features generated for predication</p>
</dd>
<dt class="field-even">type model_features</dt>
<dd class="field-even"><p>float (ranging from 0 to 1)</p>
</dd>
</dl>
</dd>
<dt>Return :</dt><dd><p>Probability of wildfire</p>
</dd>
</dl>
</dd></dl>

<p>This <strong>geo_model</strong> uses <strong>cluster_model.py</strong> for training and testing. More about this module can be found <a class="reference internal" href="tests.html#cluster-model-marker"><span class="std std-ref">here</span></a>.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="modules.html" class="btn btn-neutral float-right" title="Source and Test files" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="County_based_prediction.html" class="btn btn-neutral float-left" title="County Based Predictions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>