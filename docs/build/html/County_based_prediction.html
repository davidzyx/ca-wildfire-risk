

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>County Based Predictions &mdash; CA_Wildfire 2.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Geo Location Based Prediction" href="Geo_location.html" />
    <link rel="prev" title="County Incident Map" href="County_incident_map.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> CA_Wildfire
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="california_incident_map.html">California Incident Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="County_incident_map.html">County Incident Map</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">County Based Predictions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-to-use">How to use</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dashboard-elements-and-the-functions-used">Dashboard elements and the functions used</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-frame-with-county-and-number-of-predicted-fires-data">1. Data frame with County and number of predicted fires data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#display-pred-data">1.1 Display_pred_data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-src.utils">1.2 GetCountyPredictions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-single-countyprediction">1.3 Get_Single_CountyPrediction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#a-visual-location-of-the-county-s-and-a-bar-chart-indicating-relative-severity">2. A visual location of the county’s and a bar chart indicating relative severity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-0">2.1 Update County prediction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#a-bar-chart-indicating-past-trends-within-specified-year-range-for-the-chosen-month">3. A bar chart indicating past trends within specified year range for the chosen month</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-1">3.1 Update Trend</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-trend">3.2 Get Trend</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Geo_location.html">Geo Location Based Prediction</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_files.html">Code</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CA_Wildfire</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>County Based Predictions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/County_based_prediction.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="county-based-predictions">
<span id="county-based-prediction-marker"></span><h1>County Based Predictions<a class="headerlink" href="#county-based-predictions" title="Permalink to this headline">¶</a></h1>
<p>To better understand the underlying function calls for the prediction of fires based on user input county’s and date, let us look
at an example first.</p>
<div class="section" id="how-to-use">
<h2>How to use<a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h2>
<p>User selects a particular month for query and the county(s) (one or more than) and then the tool gives predicted number of fires.</p>
<p>Suppose you want to predict the chances of fire for 4 different county’s - <em>Napa</em> , <em>Fresno</em> , <em>Mariposa</em> , <em>Tulare</em>
for the month of June then this is the <strong>result.</strong> <a class="reference internal" href="_images/county_based_pred_1.PNG"><img alt="pred_1" src="_images/county_based_pred_1.PNG" style="width: 86.60000000000001px; height: 35.4px;" /></a></p>
<p>Similarly, we can also have a look at the past trends for a particular county for the month of choosing. <strong>Here</strong> <a class="reference internal" href="_images/county_based_pred_2.PNG"><img alt="pred_2" src="_images/county_based_pred_2.PNG" style="width: 94.80000000000001px; height: 35.0px;" /></a>, we look at the number
of fires for the county of Napa in the month of June between 2010 and 2017</p>
</div>
<div class="section" id="dashboard-elements-and-the-functions-used">
<h2>Dashboard elements and the functions used<a class="headerlink" href="#dashboard-elements-and-the-functions-used" title="Permalink to this headline">¶</a></h2>
<p>Now, a lot of things are happening over here. There are 3 dashboard elements - 1. Dataframe of all the selected county’s and
the predicted number of fires in each of them. 2. A visual location of the county’s and a bar chart indicating relative severity.
3. A bar chart indicating past trends within specified year range for the chosen month. Let us look at them one by one.</p>
<div class="section" id="data-frame-with-county-and-number-of-predicted-fires-data">
<h3>1. Data frame with County and number of predicted fires data<a class="headerlink" href="#data-frame-with-county-and-number-of-predicted-fires-data" title="Permalink to this headline">¶</a></h3>
<p>Upon selecting the county’s the first thing we see is a table on the page right, which lists the individual county’s selected
and the output of the model prediction which is nothing but the number of predicted fires. Obviously, the actual model for prediction
is important to understand. But, lets look at all the supporting functions first.</p>
<div class="section" id="display-pred-data">
<h4>1.1 Display_pred_data<a class="headerlink" href="#display-pred-data" title="Permalink to this headline">¶</a></h4>
<p>This function calls the <strong>getCountyPredictions()</strong> on the backend to get to the predictions.</p>
<span class="target" id="module-src.app"></span><dl class="py function">
<dt class="sig sig-object py" id="src.app.display_pred_data">
<span class="sig-prename descclassname"><span class="pre">src.app.</span></span><span class="sig-name descname"><span class="pre">display_pred_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queried_counties</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/app.html#display_pred_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.app.display_pred_data" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Input:</dt><dd><p>queried_counties - The list of county(s) selected by the user for prediction
month</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A table with predicted number of fires for each county</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-src.utils">
<span id="getcountypredictions"></span><h4>1.2 GetCountyPredictions<a class="headerlink" href="#module-src.utils" title="Permalink to this headline">¶</a></h4>
<dl class="py function">
<dt class="sig sig-object py" id="src.utils.getCountyPredictions">
<span class="sig-prename descclassname"><span class="pre">src.utils.</span></span><span class="sig-name descname"><span class="pre">getCountyPredictions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queried_counties</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/utils.html#getCountyPredictions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.utils.getCountyPredictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new pandas dataframe with predicted county incident numbers for a specific month. This function calls
<strong>get_single_CountyPrediction()</strong>.</p>
<dl class="simple">
<dt>Input :</dt><dd><dl class="field-list simple">
<dt class="field-odd">param queried_counties</dt>
<dd class="field-odd"><p>the counties that are being queried</p>
</dd>
<dt class="field-even">type queried_counties</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">param month</dt>
<dd class="field-odd"><p>the month that is being queried</p>
</dd>
<dt class="field-even">type month</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd>
<dt>Return :</dt><dd><p>Predicted number of fires for each county</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="get-single-countyprediction">
<h4>1.3 Get_Single_CountyPrediction<a class="headerlink" href="#get-single-countyprediction" title="Permalink to this headline">¶</a></h4>
<p>This is the function that performs the main predictive task. It combines the analytical output of three different models to predict. They
are <strong>Naive approach</strong> , <strong>Seasonal Arima Model</strong> , <strong>Unobserved components model</strong>.</p>
<p><em>Naive approach</em>: Learn from the fire occurrences in the same month each year (basically average out previous data)</p>
<p><em>Seasonal Arima</em>: Stands for autoregressive and moving average- predict the value by placing a moving window in analyzing the trend with the
nearby months and the shifted history.</p>
<p><em>Unobserved components (UCM)</em>: decompose the time series data by three components: seasonal, trend and irregularity and assume a Gaussian noise
in each of the components, what it adds up is that it also consider the trend for the irregular pattern, which is left out by the previous two</p>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">src.utils.</span></span><span class="sig-name descname"><span class="pre">get_single_CountyPrediction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queried_county</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'running'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/utils.html#get_single_CountyPrediction"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><dl class="simple">
<dt>Input :</dt><dd><dl class="field-list simple">
<dt class="field-odd">param queried_counties</dt>
<dd class="field-odd"><p>the county that is being queried</p>
</dd>
<dt class="field-even">type queried_counties</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">type month</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd>
<dt>Return :</dt><dd><p>A new pandas dataframe with predicted county incident numbers for a specific month</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="a-visual-location-of-the-county-s-and-a-bar-chart-indicating-relative-severity">
<h3>2. A visual location of the county’s and a bar chart indicating relative severity<a class="headerlink" href="#a-visual-location-of-the-county-s-and-a-bar-chart-indicating-relative-severity" title="Permalink to this headline">¶</a></h3>
<div class="section" id="module-0">
<span id="update-county-prediction"></span><h4>2.1 Update County prediction<a class="headerlink" href="#module-0" title="Permalink to this headline">¶</a></h4>
<dl class="py function">
<dt class="sig sig-object py" id="src.app.update_county_prediction">
<span class="sig-prename descclassname"><span class="pre">src.app.</span></span><span class="sig-name descname"><span class="pre">update_county_prediction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queried_counties</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/app.html#update_county_prediction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.app.update_county_prediction" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Input :</dt><dd><p>County(s)- Selected from dropdown
Month - Selected using slider</p>
</dd>
<dt>Returns :</dt><dd><p>A figure mapping the selected county(s) and number of incidents predicted</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="a-bar-chart-indicating-past-trends-within-specified-year-range-for-the-chosen-month">
<h3>3. A bar chart indicating past trends within specified year range for the chosen month<a class="headerlink" href="#a-bar-chart-indicating-past-trends-within-specified-year-range-for-the-chosen-month" title="Permalink to this headline">¶</a></h3>
<div class="section" id="module-1">
<span id="update-trend"></span><h4>3.1 Update Trend<a class="headerlink" href="#module-1" title="Permalink to this headline">¶</a></h4>
<dl class="py function">
<dt class="sig sig-object py" id="src.app.update_trend">
<span class="sig-prename descclassname"><span class="pre">src.app.</span></span><span class="sig-name descname"><span class="pre">update_trend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">county</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year_range</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/app.html#update_trend"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#src.app.update_trend" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is used in <strong>County Based Prediction</strong>. It interacts with <strong>getTrend()</strong> module in utils.py based on the
inputs for this module.
Input:</p>
<blockquote>
<div><p>county
month
year_range = start_year, end_year</p>
</div></blockquote>
<dl class="simple">
<dt>Return :</dt><dd><p>A bar chart indicating number of incidents per year for the specified inputs.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="get-trend">
<h4>3.2 Get Trend<a class="headerlink" href="#get-trend" title="Permalink to this headline">¶</a></h4>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">src.utils.</span></span><span class="sig-name descname"><span class="pre">getTrend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">county</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_year</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1969</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_year</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2021</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/utils.html#getTrend"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Returns a DataFrame for number of incidents in ‘month’ for different years between start and end as selected by users</p>
<dl class="simple">
<dt>Input :</dt><dd><p>data – DataFrame
month – intended month
start_year – the start year of inspection
end_year – the end year of inspection</p>
</dd>
<dt>Return :</dt><dd><p>A dataframe for number of incidents</p>
</dd>
</dl>
</dd></dl>

<p>Expected</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="Geo_location.html" class="btn btn-neutral float-right" title="Geo Location Based Prediction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="County_incident_map.html" class="btn btn-neutral float-left" title="County Incident Map" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>